# 파티션(Partition)
```
파티션은 대용량 테이블이나 인덱스를 작은 논리적 단위(파티션)로 나누어 관리하는 기능이다. 각 파티션은 독립적으로 저장 및 관리가 가능하다.
```

<br>

## 파티션 종류
### 1. RANGE
```
특정 컬럼의 값 범위(RANGE)에 따라 데이터를 분할한다.  
 → 주로 날짜 기반 데이터(예: 월별, 분기별, 연도별)에 많이 사용된다.  
```
```sql
CREATE TABLE sales (
    sale_id     NUMBER,
    sale_date   DATE,
    amount      NUMBER
)
PARTITION BY RANGE (sale_date) (
    PARTITION p2023q1 VALUES LESS THAN (TO_DATE('2023-04-01', 'YYYY-MM-DD')),
    PARTITION p2023q2 VALUES LESS THAN (TO_DATE('2023-07-01', 'YYYY-MM-DD')),
    PARTITION pmax    VALUES LESS THAN (MAXVALUE)
);
```
👉 `LESS THAN`은 포함하지 않는다.

<br>

### 2. LIST
```
특정 컬럼의 값 집합(LIST)에 따라 데이터를 분할한다.  
 → 주로 지역, 코드값, 상태값 등 불연속적인 값에 적합하다.  
```
```sql
CREATE TABLE customers (
    cust_id     NUMBER,
    region      VARCHAR2(10)
)
PARTITION BY LIST (region) (
    PARTITION east  VALUES ('SEOUL', 'BUSAN'),
    PARTITION west  VALUES ('JEJU'),
    PARTITION other VALUES (DEFAULT)
);
```

<br>

### 3. HASH
```
특정 컬럼의 값을 해시(Hash) 알고리즘으로 분산하여 데이터를 분할한다.  
 → 균등한 데이터 분산이 필요할 때 사용된다. (예: `order_id`, `cust_id`)
```
```sql
CREATE TABLE orders (
    order_id NUMBER,
    amount   NUMBER
)
PARTITION BY HASH (order_id)
PARTITIONS 4;
```

<br>

### 4. COMPOSITE
```
RANGE, LIST 등 주요 파티션 방법과 HASH 또는 LIST를 조합해서 사용한다.  
 → 예: RANGE로 먼저 나눈 뒤, 각 RANGE 파티션을 HASH로 다시 나눔.  
 → 대규모 데이터웨어하우스(DW)에서 사용된다.  
```
```sql
-- 복합 파티션 (RANGE + HASH)
CREATE TABLE sales_detail (
    sale_id   NUMBER,
    sale_date DATE,
    amount    NUMBER
)
PARTITION BY RANGE (sale_date)
SUBPARTITION BY HASH (sale_id)
SUBPARTITIONS 4
(
    PARTITION p2023q1 VALUES LESS THAN (TO_DATE('2023-04-01', 'YYYY-MM-DD')),
    PARTITION p2023q2 VALUES LESS THAN (TO_DATE('2023-07-01', 'YYYY-MM-DD')),
    PARTITION pmax    VALUES LESS THAN (MAXVALUE)
);
```

<br>

## 특정 파티션 조회
```sql
SELECT * FROM 테이블 PARTITION (파티션 이름);
```
```sql
-- 특정 파티션 데이터 조회
SELECT * FROM sales PARTITION (p2023q1);

-- 실행 결과 예시
SALE_ID | SALE_DATE  | AMOUNT
--------+------------+-------
1       | 2023-01-15 | 10000
2       | 2023-03-20 | 20000
```